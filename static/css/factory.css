/* =========================================================
   FACTORY MAP VIEWER ONLY
   (Everything in here is ONLY for factory.html)
   ========================================================= */

.factory-page .wrap{
  position: relative;
  height: 100vh;
  overflow: hidden;
  background: var(--bg);
}

.map-topbar{
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 25;
  display: flex;
  gap: 10px;
}

/* viewport (what the user sees) */
.factory-page .viewport{
  position: absolute;
  inset: 0;
  overflow: hidden;
  touch-action: none; /* needed for pointer pan */
  background: #000;
}

/* stage (what we transform for zoom/pan) */
.factory-page .stage{
  position: absolute;
  top: 0;
  left: 0;
  transform-origin: 0 0;
  will-change: transform;
}

.factory-page .layer{
  position: absolute;
  top: 0;
  left: 0;
  user-select: none;
  -webkit-user-drag: none;
  pointer-events: none; /* layers shouldn't block clicks */
  image-rendering: auto;
}

.factory-page .layer.hidden{ display:none; }

/* UI panel */
.factory-page .ui{
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 20;
  display: flex;
  justify-content: flex-end;
}

.factory-page .panel{
  width: auto;
  min-width: 260px;
  max-width: 320px;

  background: rgba(10,12,12,.72);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(8px);
  overflow: hidden;
  min-width: 240px;
}

.factory-page .panel header{
  padding: 10px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid rgba(255,255,255,.10);
}

.factory-page .panel header .title{
  font-weight: 700;
  letter-spacing: .2px;
}

.factory-page .panel .body{
  padding: 10px 12px;
  display: grid;
  gap: 12px;
}

.factory-page .collapsed .body{ display:none; }

.factory-page .group{ display:grid; gap:6px; }

.factory-page .group .label{
  color: var(--muted);
  font-size: 12px;
  letter-spacing: .2px;
  text-transform: uppercase;
}

.factory-page .row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.factory-page .row span{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Buttons inside panel (small) */
.factory-page .panel .btn{
  padding: 8px 10px;
  border-radius: 12px;
  background: transparent;
}

.factory-page .btn-primary{
  border-color: rgba(212,161,23,.35);
}

.factory-page .btn-primary:hover{
  border-color: rgba(212,161,23,.65);
}

/* switch */
.factory-page .switch{ position:relative; width:44px; height:24px; flex:0 0 auto; }
.factory-page .switch input{ opacity:0; width:0; height:0; }

.factory-page .slider{
  position:absolute; inset:0;
  background: rgba(255,255,255,.14);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 999px;
  transition: .18s ease;
}

.factory-page .slider:before{
  content:"";
  position:absolute;
  height:18px; width:18px;
  left:3px; top:50%;
  transform: translateY(-50%);
  background: rgba(255,255,255,.82);
  border-radius:50%;
  transition:.18s ease;
}

.factory-page .switch input:checked + .slider{
  background: rgba(212,161,23,.25);
  border-color: rgba(212,161,23,.35);
}

.factory-page .switch input:checked + .slider:before{
  transform: translate(20px, -50%);
  background: rgba(255,255,255,.92);
}

/* zoom controls */
.factory-page .zoombar{
  position:absolute;
  left:14px;
  bottom:14px;
  display:flex;
  gap:10px;
  z-index:10;
}